

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Versioning &mdash; Bifravst v10.4.8 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Support" href="../Support.html" />
    <link rel="prev" title="Cyber Security for Consumer Internet of Things: Baseline Requirements" href="ETSI-EN-303-645.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../README.html">
          

          
            
            <img src="../../_static/logo-with-text-white.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                v10.4.8
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../aws/Index.html">Bifravst on AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../azure/Index.html">Bifravst on Azure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/Index.html">Cat Tracker Web Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../firmware/Index.html">Cat Tracker firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devices/Index.html">Connect using a real device</a></li>
</ul>
<p class="caption"><span class="caption-text">Guides</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="AutomateHEXFileBuilding.html">Automate building of HEX files for your nRF Connect SDK application</a></li>
<li class="toctree-l1"><a class="reference internal" href="CellGeolocations.html">Cell Geolocations</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cloud-connectivity-and-protocols-for-the-Internet-of-Things.html">Cloud connectivity and protocols for the Internet of Things</a></li>
<li class="toctree-l1"><a class="reference internal" href="CloudDifferences.html">Cloud Differences</a></li>
<li class="toctree-l1"><a class="reference internal" href="ETSI-EN-303-645.html">Cyber Security for Consumer Internet of Things: Baseline Requirements</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Versioning</a></li>
</ul>
<p class="caption"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/bifravst">GitHub</a></li>
<li class="toctree-l1"><a class="reference external" href="https://devzone.nordicsemi.com/search?q=bifravst#serpsort=date%20desc">DevZone</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../adr/README.html">Architecture Decision Records</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CODE_OF_CONDUCT.html">Code of Conduct</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../README.html">Bifravst</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../README.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Versioning</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/bifravst/bifravst/blob/saga/docs/guides/Versioning.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="versioning">
<h1>Versioning<a class="headerlink" href="#versioning" title="Permalink to this headline">¬∂</a></h1>
<p>We use <a class="reference external" href="https://github.com/semantic-release/semantic-release">semantic-release</a> to automatically determine the next version of a project <strong>and</strong> publish a release in the GitHub project as well as release it to our <a class="reference external" href="https://www.npmjs.com/settings/bifravst/packages">npm organization</a>.</p>
<p>The next version is determined by scanning the commit messages.
They must follow <a class="reference external" href="https://github.com/semantic-release/semantic-release#commit-message-format">the Angular commit message rules</a>, and in every library <a class="reference external" href="https://github.com/marionebl/commitlint">a hook</a> will check commit messages against these rules.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">package.json</span></code> of a project should only contain <code class="docutils literal notranslate"><span class="pre">0.0.0-development</span></code> as  the <code class="docutils literal notranslate"><span class="pre">version</span></code> property, semantic-release will ignore the value.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Only the published package on npm will contain the correct version number.</p>
</div>
<div class="section" id="how-to-release-a-new-version-of-a-package">
<span id="guides-versionining-how-to-release-a-new-version-of-a-package"></span><h2>How to release a new version of a package<a class="headerlink" href="#how-to-release-a-new-version-of-a-package" title="Permalink to this headline">¬∂</a></h2>
<p>Let‚Äôs assume we have a library, which has the npm version <code class="docutils literal notranslate"><span class="pre">2.3.4</span></code>.</p>
<p>A new version will be publish by the respective project‚Äôs CI run.
All you have to do, is use commit messages that follow the <a class="reference external" href="https://github.com/semantic-release/semantic-release#commit-message-format">schema describe here</a>.</p>
<p>There are three commit messages that will trigger a release:</p>
<p>Patch release:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fix</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">commit</span> <span class="n">message</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Feature release:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">feat</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">commit</span> <span class="n">message</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Breaking Release:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">scope</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">commit</span> <span class="n">message</span><span class="o">&gt;</span>

<span class="n">BREAKING</span> <span class="n">CHANGE</span><span class="p">:</span>

<span class="o">&lt;</span><span class="n">description</span> <span class="n">of</span> <span class="n">breaking</span> <span class="n">change</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Note that <strong>any other</strong> commit message format <strong>will not trigger</strong> a release.</p>
</div>
<div class="section" id="patch-release-fix-2-3-4-2-3-5">
<h3>Patch release (<code class="docutils literal notranslate"><span class="pre">fix</span></code>) <code class="docutils literal notranslate"><span class="pre">2.3.4</span> <span class="pre">-&gt;</span> <span class="pre">2.3.5</span></code> üêû<a class="headerlink" href="#patch-release-fix-2-3-4-2-3-5" title="Permalink to this headline">¬∂</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A fix is a change to the implementation which removes a bug <strong>without changing the public API</strong> (method names and signatures, exports) of the library.
The consumer of the library must not need to change their implementation when installing the fixed version.</p>
</div>
<p>To release a fix (which will update the version from <code class="docutils literal notranslate"><span class="pre">2.3.4</span></code> to <code class="docutils literal notranslate"><span class="pre">2.3.5</span></code>, use the type <code class="docutils literal notranslate"><span class="pre">fix</span></code> in the commit message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fix</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">commit</span> <span class="n">message</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>You can optionally add a scope, which is a lowercase string used to identify the affected <em>component</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fix</span><span class="p">(</span><span class="o">&lt;</span><span class="n">scope</span><span class="o">&gt;</span><span class="p">):</span> <span class="o">&lt;</span><span class="n">commit</span> <span class="n">message</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Scopes are useful when the project is rather big.</p>
</div>
<div class="section" id="feature-release-feat-2-3-4-2-4-0">
<h3>Feature release (<code class="docutils literal notranslate"><span class="pre">feat</span></code>) <code class="docutils literal notranslate"><span class="pre">2.3.4</span> <span class="pre">-&gt;</span> <span class="pre">2.4.0</span></code> üöÄ<a class="headerlink" href="#feature-release-feat-2-3-4-2-4-0" title="Permalink to this headline">¬∂</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A feature is a change to the implementation of a library which adds additional functionality <strong>without changing the public API</strong> of the library.
You may add new exports, methods and even extra, optional method arguments, but the consumer of the library must not need to change their implementation when installing the library with the new feature.</p>
</div>
<p>To release a feature (which will update the version from <code class="docutils literal notranslate"><span class="pre">2.3.4</span></code> to <code class="docutils literal notranslate"><span class="pre">2.4.0</span></code>, use the type <code class="docutils literal notranslate"><span class="pre">feat</span></code> in the commit message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">feat</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">commit</span> <span class="n">message</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>You can optionally add a scope as well.</p>
</div>
<div class="section" id="breaking-release-breaking-change-2-3-4-3-0-0">
<h3>Breaking Release (<code class="docutils literal notranslate"><span class="pre">BREAKING</span> <span class="pre">CHANGE:</span></code>) <code class="docutils literal notranslate"><span class="pre">2.3.4</span> <span class="pre">-&gt;</span> <span class="pre">3.0.0</span></code> üö®<a class="headerlink" href="#breaking-release-breaking-change-2-3-4-3-0-0" title="Permalink to this headline">¬∂</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Every time the public API of the library changes in a way that requires the consumer to update their implementation <strong>you must mark the change as breaking</strong>.
This can happen if method names and arguments are renamed, previously optional arguments become required, arguments get removed, classes get renamed.
Even if the change is very small, as soon as you are breaking the library‚Äôs <em>contract</em> (its public API) it is considered a breaking change, <a class="reference external" href="https://semver.org/#spec-item-8">according to semver</a>.</p>
</div>
<p>To release a breaking release (which will update the version from <code class="docutils literal notranslate"><span class="pre">2.3.4</span></code> to <code class="docutils literal notranslate"><span class="pre">3.0.0</span></code>, use the text <code class="code docutils literal notranslate"><span class="pre">BREAKING</span> <span class="pre">CHANGE:</span></code> (followed by a space of two new-lines) in the commit message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">refactor</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">commit</span> <span class="n">message</span><span class="o">&gt;</span>

<span class="n">BREAKING</span> <span class="n">CHANGE</span><span class="p">:</span>

<span class="o">&lt;</span><span class="n">description</span> <span class="n">of</span> <span class="n">breaking</span> <span class="n">change</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>You can optionally add a scope as well.</p>
<p>Not that in the case of a breaking release the message type (here <code class="docutils literal notranslate"><span class="pre">refactor</span></code>) can be any valid type.</p>
</div>
</div>
<div class="section" id="typical-changes">
<h2>Typical changes<a class="headerlink" href="#typical-changes" title="Permalink to this headline">¬∂</a></h2>
<div class="section" id="updated-dependencies">
<h3>Updated dependencies<a class="headerlink" href="#updated-dependencies" title="Permalink to this headline">¬∂</a></h3>
<p>If you are manually updating dependencies in a library, you should commit the change as a fix, so that consumers are also using the updated dependencies.</p>
</div>
<div class="section" id="refactoring">
<h3>Refactoring<a class="headerlink" href="#refactoring" title="Permalink to this headline">¬∂</a></h3>
<p>If you do a pure refactoring of a library without changing the features and the public API <strong>but</strong> want to use the refactored version in your consumers, commit the refactoring as a feature.
After all, you are improving the library which qualifies as a feature, e.g. it could be a performance-improvement.</p>
</div>
</div>
<div class="section" id="how-releases-are-published">
<h2>How releases are published<a class="headerlink" href="#how-releases-are-published" title="Permalink to this headline">¬∂</a></h2>
<p>After you have pushed your changes to the remote repository, a job will be run on the CI runner.
If the job completes successfully (e.g. if all tests pass and the linter does not report any errors), <code class="docutils literal notranslate"><span class="pre">semantic-release</span></code> will determine the next version to be released.</p>
<p>The <em>‚Äúhighest‚Äù</em> commit will <em>win</em> (<code class="docutils literal notranslate"><span class="pre">fix</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">feat</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">breaking</span> <span class="pre">change</span></code>).
This means if the list of commit messages since the last release contains <em>only</em> fixes, the patch version will be incremented (<code class="code docutils literal notranslate"><span class="pre">2.3.4</span> <span class="pre">-&gt;</span> <span class="pre">2.3.5</span></code>).
If the list of commits contains at least one new feature, then the minor version will be incremented and the patch version will be set to <code class="docutils literal notranslate"><span class="pre">0</span></code> (<code class="docutils literal notranslate"><span class="pre">2.3.4</span> <span class="pre">-&gt;</span> <span class="pre">2.4.0</span></code>).
If the list of commits contains at least one breaking change, then the major version will be incremented and the minor and patch versions will be set to <code class="docutils literal notranslate"><span class="pre">0</span></code> (<code class="docutils literal notranslate"><span class="pre">2.3.4</span> <span class="pre">-&gt;</span> <span class="pre">3.0.0</span></code>).</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../Support.html" class="btn btn-neutral float-right" title="Support" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="ETSI-EN-303-645.html" class="btn btn-neutral float-left" title="Cyber Security for Consumer Internet of Things: Baseline Requirements" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2019-2021, Nordic Semiconductor ASA | nordicsemi.no.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>